(function(t,r){typeof exports=="object"&&typeof module<"u"?module.exports=r(require("vue")):typeof define=="function"&&define.amd?define(["vue"],r):(t=typeof globalThis<"u"?globalThis:t||self,t.UnifiedAuthentication=r(t.Vue))})(this,function(t){"use strict";const r={name:"UnifiedAuthentication",props:{workspace_id:{type:String,required:!0},dc:String,environment:String,title:String,description:String,success_url:String,failure_url:String,state:String,pretext:String,include_text:Boolean,include_icon:Boolean,error:String},watch:{include_text(e){this._include_text=e!==void 0?e:!0},include_icon(e){this._include_icon=e!==void 0?e:!0}},data(){var i;const e=(this.dc||"us").toLowerCase();return{api_url:location.href.includes("localhost:")?"http://localhost:8000":e==="au"?"https://api-au.unified.to":e==="eu"?"https://api-eu.unified.to":"https://api.unified.to",authintegrations:void 0,_include_text:this.include_text!==!1?this.include_text:!0,_include_icon:this.include_icon!==!1?this.include_icon:!0,_error:(i=this.error)==null?void 0:i.replace("_"," ")}},methods:{href(e){const n=new URLSearchParams;return n.append("redirect","true"),this.success_url?n.append("success_redirect",this.success_url):n.append("success_redirect",location.href.split("?")[0]),this.failure_url?n.append("failure_redirect",this.failure_url):n.append("failure_redirect",location.href.split("?")[0]),this.state&&n.append("state",this.state),this.environment&&this.environment!=="Production"&&n.append("env",this.environment),`${this.api_url}/unified/integration/login/${this.workspace_id}/${e.type}?${n.toString()}`}},async mounted(){this.authintegrations=await(await fetch(`${this.api_url}/unified/integration/workspace/${this.workspace_id}?categories=auth&active=true&summary=true&env=${this.environment||""}`)).json()||[],console.log(this.authintegrations)}},l=(e,n)=>{const i=e.__vccOpts||e;for(const[s,o]of n)i[s]=o;return i},a={class:"unified-auth-container"},d={key:0,class:"auth-title"},u={key:1,class:"auth-description"},_={key:2,class:"auth-error"},h={key:3,class:"button-container"},p=["href","title"],f=["src"],m={key:1,class:"button-text"};function k(e,n,i,s,o,g){return t.openBlock(),t.createElementBlock("div",a,[i.title?(t.openBlock(),t.createElementBlock("h3",d,t.toDisplayString(i.title),1)):t.createCommentVNode("",!0),i.description?(t.openBlock(),t.createElementBlock("p",u,t.toDisplayString(i.description),1)):t.createCommentVNode("",!0),o._error?(t.openBlock(),t.createElementBlock("div",_,t.toDisplayString(o._error),1)):(t.openBlock(),t.createElementBlock("div",h,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(o.authintegrations,c=>(t.openBlock(),t.createElementBlock("a",{class:"auth-button",href:g.href(c),title:i.pretext?`${i.pretext} ${c.name}`:c.name},[o._include_icon?(t.openBlock(),t.createElementBlock("img",{key:0,src:c.logo_url,class:"button-icon"},null,8,f)):t.createCommentVNode("",!0),o._include_text?(t.openBlock(),t.createElementBlock("div",m,t.toDisplayString(i.pretext)+" "+t.toDisplayString(c.name),1)):t.createCommentVNode("",!0)],8,p))),256))]))])}return l(r,[["render",k]])});
